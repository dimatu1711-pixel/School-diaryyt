<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-top: 20px;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #e1e1e1;
            background: white;
            border-radius: 10px 10px 0 0;
            padding: 0 10px;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 15px 20px;
            text-align: center;
            background: none;
            border: none;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }
        
        .tab.active {
            border-bottom: 3px solid #667eea;
            color: #667eea;
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        h2 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            margin: 8px 0;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            font-size: 14px;
        }
        
        .btn {
            padding: 12px 20px;
            margin: 8px 0;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .demo-accounts {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 14px;
        }
        
        .forgot-link {
            text-align: center;
            margin: 15px 0;
            color: #667eea;
            cursor: pointer;
        }
        
        .meeting-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .meeting-table th, .meeting-table td {
            border: 1px solid #e1e1e1;
            padding: 15px;
            text-align: left;
        }
        
        .meeting-table th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }
        
        .info-link {
            color: #667eea;
            cursor: pointer;
            text-decoration: underline;
            font-weight: bold;
        }
        
        .doc-viewer {
            width: 100%;
            height: 600px;
            border: none;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        /* –°—Ç–∏–ª—ñ –¥–ª—è –ø–æ–ª—è –∫–æ–¥—É –≤—á–∏—Ç–µ–ª—è */
        .teacher-code-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px dashed #e1e1e1;
        }
        
        .teacher-code-input {
            display: none;
            margin-top: 10px;
        }
        
        .teacher-toggle {
            text-align: center;
            color: #8B5FBF;
            cursor: pointer;
            font-weight: bold;
            padding: 10px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        
        .teacher-toggle:hover {
            background-color: #f8f9fa;
        }
        
        .teacher-info {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="tabs">
        <button class="tab active" onclick="openTab('login')">üîê –í—Ö—ñ–¥</button>
        <button class="tab" onclick="openTab('school')">üè´ –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —à–∫–æ–ª–∏</button>
        <button class="tab" onclick="openTab('info')">üìã –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</button>
    </div>

    <div class="container">
        <!-- –í–•–Ü–î -->
        <div id="login" class="tab-content active">
            <h2>–í—Ö—ñ–¥ –¥–æ —Å–∏—Å—Ç–µ–º–∏</h2>
            
          
            
            <table class="meeting-table">
                <thead>
                    <tr>
                        <th colspan="3">üìÖ –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∑–∞—Å—ñ–¥–∞–Ω–Ω—è</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>–ó–∞—Å—ñ–¥–∞–Ω–Ω—è ‚Ññ1</strong></td>
                        <td>–ó –ø–∏—Ç–∞–Ω—å –∑–∞—Ö–∏—Å—Ç—É –¥–∞–Ω–∏—Ö</td>
                        <td>
                            <span style="background: #d4edda; color: #155724; padding: 5px 12px; border-radius: 20px; font-size: 12px; font-weight: bold;">–ü—Ä–æ–≤–µ–¥–µ–Ω–æ</span>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>–î–∞—Ç–∞</strong></td>
                        <td>25 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2024</td>
                        <td>
                            <span class="info-link" onclick="openTab('info')">
                                –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ ‚Üí
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <!-- –ó–≤–∏—á–∞–π–Ω–∏–π –≤—Ö—ñ–¥ -->
            <input type="text" id="loginEmail" placeholder="Email">
            <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å">
            <button class="btn" onclick="login()">–£–≤—ñ–π—Ç–∏</button>
            
            <!-- –ü–µ—Ä–µ–º–∏–∫–∞—á –¥–ª—è –≤—á–∏—Ç–µ–ª—è -->
            <div class="teacher-code-section">
                <div class="teacher-toggle" onclick="toggleTeacherLogin()">
                    üë®‚Äçüè´ –Ø –≤—á–∏—Ç–µ–ª—å, —Ö–æ—á—É —É–≤—ñ–π—Ç–∏ –∑–∞ –∫–æ–¥–æ–º
                </div>
                <div class="teacher-info">
                    (–ö–æ–¥ –≤–∏–¥–∞—î—Ç—å—Å—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —à–∫–æ–ª–∏)
                </div>
                
                <!-- –ü–æ–ª–µ –¥–ª—è –∫–æ–¥—É –≤—á–∏—Ç–µ–ª—è -->
                <div id="teacherCodeInput" class="teacher-code-input">
                    <input type="text" id="teacherCode" placeholder="–í–≤–µ–¥—ñ—Ç—å –∫–æ–¥ –¥–æ—Å—Ç—É–ø—É (–Ω–∞–ø—Ä. TEACHER123)" style="margin-top: 15px;">
                    <button class="btn" onclick="loginWithCode()" style="background: linear-gradient(135deg, #8B5FBF 0%, #6A3093 100%);">
                        üë®‚Äçüè´ –£–≤—ñ–π—Ç–∏ –∑–∞ –∫–æ–¥–æ–º
                    </button>
                </div>
            </div>
            
            <div class="forgot-link" onclick="sendRecoveryCode()">
                –ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å?
            </div>
        </div>

        <!-- –†–ï–Ñ–°–¢–†–ê–¶–Ü–Ø –®–ö–û–õ–ò -->
        <div id="school" class="tab-content">
            <h2>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∑–∞–∫–ª–∞–¥—É –æ—Å–≤—ñ—Ç–∏</h2>
            
            <input type="text" id="schoolName" placeholder="–ù–∞–∑–≤–∞ –∑–∞–∫–ª–∞–¥—É">
            <input type="email" id="schoolEmail" placeholder="Email –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞">
            <input type="text" id="schoolAddress" placeholder="–ê–¥—Ä–µ—Å–∞">
            <input type="tel" id="schoolPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
            <select id="schoolType">
                <option value="">–¢–∏–ø –∑–∞–∫–ª–∞–¥—É</option>
                <option value="school">–®–∫–æ–ª–∞</option>
                <option value="lyceum">–õ—ñ—Ü–µ–π</option>
                <option value="gymnasium">–ì—ñ–º–Ω–∞–∑—ñ—è</option>
            </select>
            <button class="btn" onclick="registerSchool()">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –∑–∞–∫–ª–∞–¥</button>
        </div>

        <!-- –Ü–ù–§–û–†–ú–ê–¶–Ü–Ø -->
        <div id="info" class="tab-content">
            <h2>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –∑–∞—Å—ñ–¥–∞–Ω–Ω—è</h2>
            
            <iframe src="https://docs.google.com/document/d/1qSKSLGrN2Cx7igervQC2QEgx0Hy01IF7RryqsNs4WIc/preview" 
                    class="doc-viewer">
            </iframe>
        </div>
    </div>

    <script>
        emailjs.init("G0J3Izq0LA9Bgb4X0");

        const demoUsers = {
            "admin@school.com": {password: "admin123", role: "admin"},
            "teacher@school.com": {password: "teacher123", role: "teacher"}, 
            "student@school.com": {password: "student123", role: "student"}
        };

        function openTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function toggleTeacherLogin() {
            const codeInput = document.getElementById('teacherCodeInput');
            const toggleBtn = document.querySelector('.teacher-toggle');
            
            if (codeInput.style.display === 'block') {
                codeInput.style.display = 'none';
                toggleBtn.innerHTML = 'üë®‚Äçüè´ –Ø –≤—á–∏—Ç–µ–ª—å, —Ö–æ—á—É —É–≤—ñ–π—Ç–∏ –∑–∞ –∫–æ–¥–æ–º';
            } else {
                codeInput.style.display = 'block';
                toggleBtn.innerHTML = 'üë®‚Äçüè´ –°—Ö–æ–≤–∞—Ç–∏ –≤—Ö—ñ–¥ –∑–∞ –∫–æ–¥–æ–º';
                
                // –§–æ–∫—É—Å—É—î–º–æ—Å—è –Ω–∞ –ø–æ–ª—ñ –∫–æ–¥—É
                setTimeout(() => {
                    document.getElementById('teacherCode').focus();
                }, 100);
            }
        }

        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if(demoUsers[email] && demoUsers[email].password === password) {
                // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –¥–∞–Ω—ñ –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
                const userData = {
                    email: email,
                    role: demoUsers[email].role,
                    name: email.split('@')[0],
                    isAuthenticated: true
                };
                
                localStorage.setItem('userData', JSON.stringify(userData));
                
                // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —Ä–æ–ª—ñ
                if (demoUsers[email].role === 'admin') {
                    window.location.href = 'school-admin.html';
                } else if (demoUsers[email].role === 'teacher') {
                    // –î–ª—è –¥–µ–º–æ-–≤—á–∏—Ç–µ–ª—è —Å—Ç–≤–æ—Ä—é—î–º–æ –∫–æ–¥ –¥–æ—Å—Ç—É–ø—É
                    const teacherAuth = {
                        isAuthenticated: true,
                        name: "–î–µ–º–æ –í—á–∏—Ç–µ–ª—å",
                        email: email,
                        subject: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞",
                        id: "demo_teacher",
                        code: "TEACHER123"
                    };
                    localStorage.setItem('teacherAuth', JSON.stringify(teacherAuth));
                    window.location.href = 'teacher-diary.html';
                } else {
                    window.location.href = 'dashboard.html';
                }
            } else {
                alert('‚ùå –ù–µ–≤—ñ—Ä–Ω–∏–π email –∞–±–æ –ø–∞—Ä–æ–ª—å!');
            }
        }

        function loginWithCode() {
            const code = document.getElementById('teacherCode').value.trim().toUpperCase();
            
            if (!code) {
                alert('‚ùå –ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –∫–æ–¥ –¥–æ—Å—Ç—É–ø—É!');
                return;
            }
            
            // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –¥–∞–Ω—ñ —à–∫–æ–ª–∏
            const schoolData = JSON.parse(localStorage.getItem('schoolData')) || {
                teachers: [],
                classes: []
            };
            
            // –®—É–∫–∞—î–º–æ –≤—á–∏—Ç–µ–ª—è –∑–∞ –∫–æ–¥–æ–º (–ø–∞—Ä–æ–ª–µ–º)
            const teacher = schoolData.teachers.find(t => 
                t.password && t.password.toUpperCase() === code
            );
            
            // –î–µ–º–æ-–∫–æ–¥ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
            const demoCode = 'TEACHER123';
            
            if (teacher || code === demoCode) {
                // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –¥–∞–Ω—ñ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
                const teacherAuth = {
                    isAuthenticated: true,
                    name: teacher ? teacher.name : '–î–µ–º–æ –í—á–∏—Ç–µ–ª—å',
                    email: teacher ? teacher.email : 'demo@teacher.com',
                    subject: teacher ? teacher.subject : '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞',
                    id: teacher ? teacher.id : 'demo',
                    code: code
                };
                
                localStorage.setItem('teacherAuth', JSON.stringify(teacherAuth));
                
                alert(`‚úÖ –£—Å–ø—ñ—à–Ω–∏–π –≤—Ö—ñ–¥!\n–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ, ${teacherAuth.name}!`);
                window.location.href = 'teacher-diary.html';
            } else {
                alert('‚ùå –ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø—É. –ó–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞.');
                
                // –ü—ñ–¥—Å–≤—ñ—á—É—î–º–æ –ø–æ–ª–µ —á–µ—Ä–≤–æ–Ω–∏–º
                document.getElementById('teacherCode').style.borderColor = '#e74c3c';
                setTimeout(() => {
                    document.getElementById('teacherCode').style.borderColor = '#e1e1e1';
                }, 1000);
            }
        }

        function registerSchool() {
            const schoolName = document.getElementById('schoolName').value;
            const email = document.getElementById('schoolEmail').value;
            const address = document.getElementById('schoolAddress').value;
            const phone = document.getElementById('schoolPhone').value;
            const type = document.getElementById('schoolType').value;
            
            if(schoolName && email) {
                const schoolData = {
                    name: schoolName,
                    email: email,
                    address: address,
                    phone: phone,
                    type: type,
                    teachers: [],
                    classes: [],
                    admins: [
                        {
                            id: Date.now(),
                            name: '–î–∏—Ä–µ–∫—Ç–æ—Ä',
                            email: email
                        }
                    ],
                    students: [],
                    website: ''
                };
                
                localStorage.setItem('schoolData', JSON.stringify(schoolData));
                
                // –ü–†–û–°–¢–û –ü–ï–†–ï–ù–ê–ü–†–ê–í–õ–Ø–Ñ–ú–û –ù–ê school-admin.html
                window.location.href = 'school-admin.html';
            } else {
                alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –Ω–∞–∑–≤—É —à–∫–æ–ª–∏ —Ç–∞ email!');
            }
        }

        function sendRecoveryCode() {
            const email = prompt("–í–≤–µ–¥—ñ—Ç—å –≤–∞—à email –¥–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—è:");
            
            if(email) {
                const code = Math.floor(100000 + Math.random() * 900000);
                
                emailjs.send("service_ydertiz", "template_xxxxx", {
                    to_email: email,
                    –ö–û–î_–î–û–°–¢–£–ü–ê: code
                })
                .then(function() {
                    alert('‚úÖ –ö–æ–¥ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ ' + email + '\n–ö–æ–¥: ' + code);
                })
                .catch(function() {
                    alert('üìß –ö–æ–¥ –¥–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è: ' + code);
                });
            }
        }
        
        // –î–æ–∑–≤–æ–ª—è—î–º–æ –≤—Ö—ñ–¥ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Enter
        document.getElementById('loginEmail').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                login();
            }
        });
        
        document.getElementById('loginPassword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                login();
            }
        });
        
        document.getElementById('teacherCode').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                loginWithCode();
            }
        });
    </script>
</body>
</html>
